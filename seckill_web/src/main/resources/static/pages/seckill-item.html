<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <title>产品详情页</title>
    <link rel="icon" href="./img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="./css/all.css"/>
    <link rel="stylesheet" type="text/css" href="./css/pages-seckill-item.css"/>
    <link rel="stylesheet" type="text/css" href="./css/pages-zoom.css"/>
    <script src="./js/moment.min.js"></script>
</head>

<body>
<div id="app">
    <!-- 头部栏位 -->
    <!--页面顶部-->
    <div id="nav-bottom">
        <!--顶部-->
        <div class="nav-top">
            <div class="top">
                <div class="py-container">
                    <div class="shortcut">
                        <ul class="fl">
                            <li class="f-item">美团欢迎您！<b>{{username}}</b></li>
                            <li class="f-item" v-if="username ==''">请<a href="http://localhost:9091/login" target="_blank">登录</a>　<span><a
                                    href="register.html" target="_blank">免费注册</a></span></li>
                        </ul>
                        <div class="fr typelist">
                            <ul class="types">
                                <li class="f-item"><span>我的订单</span></li>

                                <li class="f-item"><span><a href="cart.html" target="_blank">手机APP</a></span></li>
                                <li class="f-item"><span><a href="home.html" target="_blank">我的美团</a></span></li>
                                <li class="f-item"><span>关注美团</span></li>
                                <li class="f-item"><span><a href="cooperation.html" target="_blank">合作招商</a></span></li>
                                <li class="f-item"><span><a href="shoplogin.html" target="_blank">商家后台</a></span></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>

            <!--头部-->
            <div class="header">
                <div class="py-container">
                    <div class="yui3-g Logo">
                        <div class="yui3-u Left logoArea">
                            <a class="logo-bd" title="美团" href="index.html" target="_blank"></a>
                        </div>
                        <div class="yui3-u Rit searchArea">

                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="py-container">
        <div id="item">
            <div class="crumb-wrap">
                <ul class="sui-breadcrumb">
                    <li>
                        <a href="#">酒店、旅游、住宿</a>
                    </li>
                    <li>
                        <a href="#">酒店</a>
                    </li>
                    <li>
                        <a href="#">海景系列</a>
                    </li>
                    <li class="active">三亚湾</li>
                </ul>
            </div>
            <!--product-info-->
            <div class="product-info">
                <div class="fl preview-wrap">
                    <!--放大镜效果-->
                    <div class="zoom">
                        <!--默认第一个预览-->
                        <div id="preview" class="spec-preview">
                            <span class="jqzoom"><img jqimg="../img/_/b1.png" src="./img/_/s1.png"/></span>
                        </div>
                        <!--下方的缩略图-->
                        <div class="spec-scroll">
                            <a class="prev">&lt;</a>
                            <!--左右按钮-->
                            <div class="items">
                                <ul>
                                    <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s1.png" bimg="../img/_/b1.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s2.png" bimg="../img/_/b2.png" onmousemove="preview(this)"/>
                                    </li>
                                    <li><img src="./img/_/s3.png" bimg="../img/_/b3.png" onmousemove="preview(this)"/>
                                    </li>
                                </ul>
                            </div>
                            <a class="next">&gt;</a>
                        </div>
                    </div>
                    <div class="product-collect">
                        <a href="javascript:;" id="star"><img src="./img/_/shi_heart.png" alt=""> 收藏</a>
                    </div>
                </div>
                <div class="fr itemInfo-wrap">
                    <div class="sku-name">
                        <h4>{{entity.title}}</h4>
                    </div>
                    <div class="news">
                        <span><img src="./img/_/clock.png"/>美团秒杀</span>
                        <span class="overtime">{{message}}</span>
                    </div>
                    <div class="summary">
                        <div class="summary-wrap">

                            <div class="fl title">
                                <i>价　　格</i>
                            </div>
                            <div class="fl price">
                                <i>¥</i>
                                <em>{{entity.costPrice}}</em>
                                <span>原价：{{entity.price}}</span>
                            </div>
                            <div class="fr remark">
                                <i>剩余库存</i><em>{{entity.stockCount}}</em>
                            </div>
                        </div>
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>促　　销</i>
                            </div>
                            <div class="fl fix-width">
                                <i class="red-bg">加价购</i>
                                <em class="t-gray">蜈支洲岛一日游船票</em>
                            </div>
                        </div>
                    </div>
                    <div class="support">
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>支　　持</i>
                            </div>
                            <div class="fl fix-width">
                                <em class="t-gray">换洗床单，早餐配送,叫早服务</em>
                            </div>
                        </div>
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>预 约 制</i>
                            </div>
                            <div class="fl fix-width">
                                <em class="t-gray">满三天及以上,八折，</em>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix choose">
                        <div id="specification" class="summary-wrap clearfix">
                            <dl>
                                <dt>
                                    <div class="fl title">
                                        <i>选择方位</i>
                                    </div>
                                </dt>
                                <dd><a href="javascript:;" class="selected">南面临海<span title="点击取消选择">&nbsp;</span>
                                </a></dd>
                            </dl>
                            <dl>
                                <dt>
                                    <div class="fl title">
                                        <i>房间面积</i>
                                    </div>
                                </dt>
                                <dd><a href="javascript:;" class="selected">90m²<span title="点击取消选择">&nbsp;</span>
                                </a></dd>
                            </dl>
                            <dl>
                                <dt>
                                    <div class="fl title">
                                        <i>选择游泳池</i>
                                    </div>
                                </dt>
                                <dd><a href="javascript:;" class="selected">露天<span title="点击取消选择">&nbsp;</span>
                                </a></dd>
                            </dl>
                            <dl>
                                <dt>
                                    <div class="fl title">
                                        <i>购买方式</i>
                                    </div>
                                </dt>
                                <dd><a href="javascript:;" class="selected">海景标配<span title="点击取消选择">&nbsp;</span>
                                </a></dd>
                            </dl>
                            <dl>
                                <dt>
                                    <div class="fl title">
                                        <i>洗漱套装</i>
                                    </div>
                                </dt>
                                <dd><a href="javascript:;" class="selected">高档套装<span title="点击取消选择">&nbsp;</span>
                                </a></dd>
                            </dl>


                        </div>


                        <div class="summary-wrap">
                            <div class="fl title">
                                <div class="control-group">
                                    <div class="controls">
                                        <input autocomplete="off" type="text" readonly="readonly" value="1" minnum="1"
                                               class="itxt"/>
                                        <a href="javascript:void(0)" class="increment plus"></a>
                                        <a href="javascript:void(0)" class="increment mins"></a>
                                    </div>
                                </div>
                            </div>
                            <div class="fl">
                                <ul class="btn-choose unstyled">
                                    <li style="line-height: 50px;">
                                        <a href="javascript:void(0)" @click="add()" class="addshopcar">立即抢购</a>{{msg}}
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--product-detail-->
            <div class="clearfix product-detail">
                <div class="fl aside">
                    <div class="shop">
                        <span class="fl">大自然旅行社</span><span class="fr"><a href="shop.html" target="_blank"
                                                                         class="sui-btn btn-bordered btn-danger">进入商家</a></span>
                    </div>
                    <div class="clearfix"></div>
                    <ul class="sui-nav nav-tabs tab-wraped">
                        <li class="active">
                            <a href="#index" data-toggle="tab">
                                <span>相关分类</span>
                            </a>
                        </li>
                        <li>
                            <a href="#profile" data-toggle="tab">
                                <span>推荐品牌</span>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content tab-wraped">
                        <div id="index" class="tab-pane active">

                            <ul class="goods-list unstyled">
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="./img/_/part01.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>田园风</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>688.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="./img/_/part02.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>北欧风</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>588.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="./img/_/part03.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>日系风</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>788.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="./img/_/part02.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>中国风</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>888.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="list-wrap">
                                        <div class="p-img">
                                            <img src="./img/_/part03.png"/>
                                        </div>
                                        <div class="attr">
                                            <em>北美风</em>
                                        </div>
                                        <div class="price">
                                            <strong>
                                                <em>¥</em>
                                                <i>1088.00</i>
                                            </strong>
                                        </div>
                                        <div class="operate">
                                            <a href="javascript:void(0);" class="sui-btn btn-bordered">加入购物车</a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div id="profile" class="tab-pane">
                            <p>推荐品牌</p>
                        </div>
                    </div>
                </div>
                <div class="fr detail">

                    <div class="tab-main intro">
                        <ul class="sui-nav nav-tabs tab-wraped">
                            <li class="active">
                                <a href="#one" data-toggle="tab">
                                    <span>酒店介绍</span>
                                </a>
                            </li>

                        </ul>
                        <div class="clearfix"></div>
                        <div class="tab-content tab-wraped">
                            <div id="one" class="tab-pane active">
                                <ul class="goods-intro unstyled">
                                    <li>三亚海棠湾喜来登度假酒店位于享有“国家海岸”美誉的海棠湾中心地带，与蜈支洲岛隔海相望，并毗邻诸多著名旅游景点及多个高尔夫球场。这里阳光灿烂，海水湛蓝，椰林婆娑，民风淳朴等等。是您休闲度假及举办会议的理想之地。</li>
                                </ul>
                                <div class="intro-detail">
                                    <img src="./img/_/intro01.png"/>
                                    <img src="./img/_/intro02.png"/>
                                    <img src="./img/_/intro03.png"/>
                                </div>
                            </div>
                            <div id="two" class="tab-pane">
                                <p>规格与包装</p>
                            </div>
                            <div id="three" class="tab-pane">
                                <p>售后保障</p>
                            </div>
                            <div id="four" class="tab-pane">
                                <p>商品评价</p>
                            </div>
                            <div id="five" class="tab-pane">
                                <p>手机社区</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--like-->
            <div class="clearfix"></div>

        </div>
    </div>
    <!-- 底部栏位 -->
    <!--页面底部-->
    <div class="clearfix footer">
        <div class="py-container">
            <div class="footlink">
                <div class="Mod-service">
                    <ul class="Mod-Service-list">
                        <li class="grid-service-item intro  intro1">

                            <i class="serivce-item fl"></i>
                            <div class="service-text">
                                <h4>正品保障</h4>
                                <p>正品保障，提供发票</p>
                            </div>

                        </li>
                        <li class="grid-service-item  intro intro2">

                            <i class="serivce-item fl"></i>
                            <div class="service-text">
                                <h4>正品保障</h4>
                                <p>正品保障，提供发票</p>
                            </div>

                        </li>
                        <li class="grid-service-item intro  intro3">

                            <i class="serivce-item fl"></i>
                            <div class="service-text">
                                <h4>正品保障</h4>
                                <p>正品保障，提供发票</p>
                            </div>

                        </li>
                        <li class="grid-service-item  intro intro4">

                            <i class="serivce-item fl"></i>
                            <div class="service-text">
                                <h4>正品保障</h4>
                                <p>正品保障，提供发票</p>
                            </div>

                        </li>
                        <li class="grid-service-item intro intro5">

                            <i class="serivce-item fl"></i>
                            <div class="service-text">
                                <h4>正品保障</h4>
                                <p>正品保障，提供发票</p>
                            </div>

                        </li>
                    </ul>
                </div>
                <div class="clearfix Mod-list">
                    <div class="yui3-g">
                        <div class="yui3-u-1-6">
                            <h4>购物指南</h4>
                            <ul class="unstyled">
                                <li>购物流程</li>
                                <li>会员介绍</li>
                                <li>生活旅行/团购</li>
                                <li>常见问题</li>
                                <li>购物指南</li>
                            </ul>

                        </div>
                        <div class="yui3-u-1-6">
                            <h4>配送方式</h4>
                            <ul class="unstyled">
                                <li>上门自提</li>
                                <li>211限时达</li>
                                <li>配送服务查询</li>
                                <li>配送费收取标准</li>
                                <li>海外配送</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>支付方式</h4>
                            <ul class="unstyled">
                                <li>货到付款</li>
                                <li>在线支付</li>
                                <li>分期付款</li>
                                <li>邮局汇款</li>
                                <li>公司转账</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>售后服务</h4>
                            <ul class="unstyled">
                                <li>售后政策</li>
                                <li>价格保护</li>
                                <li>退款说明</li>
                                <li>返修/退换货</li>
                                <li>取消订单</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>特色服务</h4>
                            <ul class="unstyled">
                                <li>夺宝岛</li>
                                <li>DIY装机</li>
                                <li>延保服务</li>
                                <li>品优购E卡</li>
                                <li>品优购通信</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>帮助中心</h4>
                            <img src="./img/interest03.png">
                        </div>
                    </div>
                </div>
                <div class="Mod-copyright">
                    <ul class="helpLink">
                        <li>关于我们<span class="space"></span></li>
                        <li>联系我们<span class="space"></span></li>
                        <li>关于我们<span class="space"></span></li>
                        <li>商家入驻<span class="space"></span></li>
                        <li>营销中心<span class="space"></span></li>
                        <li>友情链接<span class="space"></span></li>
                        <li>关于我们<span class="space"></span></li>
                        <li>营销中心<span class="space"></span></li>
                        <li>友情链接<span class="space"></span></li>
                        <li>关于我们</li>
                    </ul>
                    <p>地址：北京市亦庄创业大道美团大厦 邮编：100096 电话：400-632-7000 传真：010-82999100</p>
                    <p>京ICP备08001421号京公网安备110108007702</p>
                </div>
            </div>
        </div>
    </div>
    <!--页面底部END-->
    <!--侧栏面板开始-->
    <div class="J-global-toolbar">
        <div class="toolbar-wrap J-wrap">
            <div class="toolbar">
                <div class="toolbar-panels J-panel">

                    <!-- 购物车 -->
                    <div style="visibility: hidden;"
                         class="J-content toolbar-panel tbar-panel-cart toolbar-animate-out">
                        <h3 class="tbar-panel-header J-panel-header">
                            <a href="" class="title"><i></i><em class="title">购物车</em></a>
                            <span class="close-panel J-close" onclick="cartPanelView.tbar_panel_close('cart');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div id="J-cart-tips" class="tbar-tipbox hide">
                                    <div class="tip-inner">
                                        <span class="tip-text">还没有登录，登录后商品将被保存</span>
                                        <a href="#none" class="tip-btn J-login">登录</a>
                                    </div>
                                </div>
                                <div id="J-cart-render">
                                    <!-- 列表 -->
                                    <div id="cart-list" class="tbar-cart-list">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 小计 -->
                        <div id="cart-footer" class="tbar-panel-footer J-panel-footer">
                            <div class="tbar-checkout">
                                <div class="jtc-number"><strong class="J-count" id="cart-number">0</strong>件商品</div>
                                <div class="jtc-sum"> 共计：<strong class="J-total" id="cart-sum">¥0</strong></div>
                                <a class="jtc-btn J-btn" href="#none" target="_blank">去购物车结算</a>
                            </div>
                        </div>
                    </div>

                    <!-- 我的关注 -->
                    <div style="visibility: hidden;" data-name="follow"
                         class="J-content toolbar-panel tbar-panel-follow">
                        <h3 class="tbar-panel-header J-panel-header">
                            <a href="#" target="_blank" class="title"> <i></i> <em class="title">我的关注</em> </a>
                            <span class="close-panel J-close"
                                  onclick="cartPanelView.tbar_panel_close('follow');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div class="tbar-tipbox2">
                                    <div class="tip-inner"><i class="i-loading"></i></div>
                                </div>
                            </div>
                        </div>
                        <div class="tbar-panel-footer J-panel-footer"></div>
                    </div>

                    <!-- 我的足迹 -->
                    <div style="visibility: hidden;"
                         class="J-content toolbar-panel tbar-panel-history toolbar-animate-in">
                        <h3 class="tbar-panel-header J-panel-header">
                            <a href="#" target="_blank" class="title"> <i></i> <em class="title">我的足迹</em> </a>
                            <span class="close-panel J-close"
                                  onclick="cartPanelView.tbar_panel_close('history');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div class="jt-history-wrap">
                                    <ul>
                                        <!--<li class="jth-item">
                                            <a href="#" class="img-wrap"> <img src="../../.../portal/img/like_03.png" height="100" width="100" /> </a>
                                            <a class="add-cart-button" href="#" target="_blank">加入购物车</a>
                                            <a href="#" target="_blank" class="price">￥498.00</a>
                                        </li>
                                        <li class="jth-item">
                                            <a href="#" class="img-wrap"> <img src="../../../portal/img/like_02.png" height="100" width="100" /></a>
                                            <a class="add-cart-button" href="#" target="_blank">加入购物车</a>
                                            <a href="#" target="_blank" class="price">￥498.00</a>
                                        </li>-->
                                    </ul>
                                    <a href="#" class="history-bottom-more" target="_blank">查看更多足迹商品 &gt;&gt;</a>
                                </div>
                            </div>
                        </div>
                        <div class="tbar-panel-footer J-panel-footer"></div>
                    </div>

                </div>

                <div class="toolbar-header"></div>

                <!-- 侧栏按钮 -->
                <div class="toolbar-tabs J-tab">
                    <div onclick="cartPanelView.tabItemClick('cart')" class="toolbar-tab tbar-tab-cart" data="购物车"
                         tag="cart">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count " id="tab-sub-cart-count">0</span>
                    </div>
                    <div onclick="cartPanelView.tabItemClick('follow')" class="toolbar-tab tbar-tab-follow" data="我的关注"
                         tag="follow">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count hide">0</span>
                    </div>
                    <div onclick="cartPanelView.tabItemClick('history')" class="toolbar-tab tbar-tab-history"
                         data="我的足迹" tag="history">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count hide">0</span>
                    </div>
                </div>

                <div class="toolbar-footer">
                    <div class="toolbar-tab tbar-tab-top"><a href="#"> <i class="tab-ico  "></i> <em
                            class="footer-tab-text">顶部</em> </a></div>
                    <div class="toolbar-tab tbar-tab-feedback"><a href="#" target="_blank"> <i class="tab-ico"></i> <em
                            class="footer-tab-text ">反馈</em> </a></div>
                </div>

                <div class="toolbar-mini"></div>

            </div>

            <div id="J-toolbar-load-hook"></div>

        </div>
    </div>
</div>
<script src="/js/vue.js"></script>
<script src="/js/util.js"></script>
<script src="/js/axios.js"></script>
<script src="/js/moment.min.js"></script>
<script>
    var app = new Vue({
        el:'#app',
        data:{
            entity:{},      //商品详情
            message:'距离结束：',     //倒计时时间提示
            username:''
        },
        methods:{
            //查询订单抢单状态
            queryStatus:function () {
                //120秒查询抢购信息
                let count=120;

                //定时查询->window.setInterval():每秒钟查询一次
                let queryClock = window.setInterval(function () {
                    //时间递减
                    count--;

                    //根据状态判断对应操作
                    axios.get('/seckill/order/query').then(function (response) {
                        //403->未登录->登录
                        if(response.data.code==403){
                            location.href='http://localhost:8084/login';
                        }else if(response.data.code==1){
                            //1->排队中->继续定时查询
                            app.msg='正在排队....'+count;
                        }else if(response.data.code==2){
                            //2->抢单成功
                            app.msg='抢单成功，即将进入支付！';
                            //跳转到支付页->携带订单号+订单金额
                            location.href='http://localhost:9094/pay?orderId='+response.data.other.orderId+'&money='+response.data.other.money*100;
                            alert("跳转到支付页面")
                        }else{
                            //0->抢单失败
                            if(response.data.code==0){
                                window.clearInterval(queryClock);
                                app.msg='服务器繁忙，请稍后再试！';
                            }else if(response.data.code==404){
                                //404->找不到数据
                                app.msg='抢单失败，稍后再试！';
                            }
                            //停止查询
                            window.clearInterval(queryClock);
                        }
                    });
                },1000);
            },
            //添加订单方法
            add:function () {
                //获取地址栏time
                let time = getQueryString("time");
                //获取地址栏ID
                let id = getQueryString("id");

                axios.get('/seckill/order/add?time='+time+'&id='+id).then(function (response) {
                    if(response.data.code==0 || (response.data==2 && response.data.message=="100")){
                        //排队成功,查询排队状态
                        app.queryStatus();
                        alert(response.data.message);
                    }else if(response.data.code==403){
                        //跳转到登录页面
                        location.href='http://localhost:8084/login';
                    }else{
                        if(response.data.message=="100"){
                            alert("重复抢单")
                        }else{
                            alert(response.data.message)
                        }
                    }
                })
            },


            //获取秒杀商品详情
            getOne:function () {
                //获取地址栏time
                let time = getQueryString("time");
                //获取地址栏ID
                let id = getQueryString("id");

                //根据ID查询商品详情
                axios.get('/seckill/goods/selOne?time='+time+'&id='+id).then(function (response) {
                    app.entity = response.data;
                    //秒杀倒计时时间
                    app.timeCalculate(new Date(app.entity.startTime).getTime(),new Date(app.entity.endTime));
                });
            },

            /***
             * 时间运算
             * @param starttimes:秒杀开始时间
             * @param endtimes：秒杀结束时间
             */
            timeCalculate:function (starttimes,endtimes) {
                //获取当前时间
                let nowtimes = new Date();
                if(nowtimes > endtimes){
                    app.message='活动已结束！';
                    return;
                }
                //时间差
                let nums = 0;

                //前缀，记录倒计时描述
                let prefix ='距离结束：';

                //判断是距离开始/距离结束
                if(starttimes<=nowtimes){
                    //距离结束,运算求出nums
                    nums = endtimes-nowtimes;
                }else{
                    //距离开始
                    prefix='距离开始：';

                    //运算求出nums
                    nums = starttimes-nowtimes;
                }

                //nums定时递减
                let clock = window.setInterval(function () {
                    //时间递减
                    nums=nums-1000;

                    //消息拼接
                    app.message=prefix+app.timedown(nums);

                    //nums<0
                    if(nums<=0){
                        //结束定时任务
                        window.clearInterval(clock);
                        //刷新时间，重新调用该方法
                        app.timeCalculate(starttimes,endtimes);
                    }
                },1000);
            },

            //将毫秒转换成天时分秒
            timedown:function(num) {
                var oneSecond = 1000;
                var oneMinute=oneSecond*60;
                var oneHour=oneMinute*60
                var oneDay=oneHour*24;
                //天数
                var days =Math.floor(num/oneDay);
                //小时
                var hours =Math.floor((num%oneDay)/oneHour);
                //分钟
                var minutes=Math.floor((num%oneHour)/oneMinute);
                //秒
                var seconds=Math.floor((num%oneMinute)/oneSecond);
                //拼接时间格式
                var str = days+'天'+hours+'时'+minutes+'分'+seconds+'秒';
                return str;
            },
            //获取登录的用户信息
            getUser(){
                //根据ID查询商品详情
                axios.post('/getuser').then(function (response) {
                    app.username = response.data;
                });
            }
        },

        created:function () {
            //查询商品详情
            this.getOne();
            this.getUser();
        }
    });
</script>
</body>
</html>